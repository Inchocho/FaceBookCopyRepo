DROP TABLE POST_INFO_TB;
DROP TABLE USER_INFO_TB;

DROP SEQUENCE POST_INFO_USER_NO_SEQ;
DROP SEQUENCE USER_INFO_USER_NO_SEQ;

CREATE TABLE USER_INFO_TB(
	  USER_NO 			NUMBER CONSTRAINT USER_INFO_TB_PK PRIMARY KEY NOT NULL 
	, USER_NAME 		VARCHAR2(40) NOT NULL
    , USER_NICKNAME     VARCHAR2(40) CONSTRAINT USER_INFO_TB_UK UNIQUE
	, USER_PHONE_EMAIL 	VARCHAR2(40) CONSTRAINT USER_INFO_TB_uk2 unique not null
	, USER_PASSWORD 	VARCHAR2(40) NOT NULL
	, USER_BIRTH		DATE NOT NULL
	, USER_GENDER		VARCHAR2(20) NOT NULL
	, USER_CREATEDATE	DATE NOT NULL
	, USER_MODIFYDATE	DATE NOT NULL    
);

CREATE TABLE POST_INFO_TB(
      POST_NUM  NUMBER CONSTRAINT POST_INFO_TB_PK PRIMARY KEY
	, POST_NO NUMBER CONSTRAINT POST_INFO_TB_FK REFERENCES USER_INFO_TB(USER_NO) NOT NULL
    , POST_TITLE VARCHAR2(40) NOT NULL
	, POST_CONTENT VARCHAR2(4000) NOT NULL	
    , POST_CREATEDATE DATE DEFAULT SYSDATE
    , POST_MODIFYDATE DATE DEFAULT SYSDATE
    , POST_COUNT NUMBER DEFAULT 0
);

CREATE SEQUENCE USER_INFO_USER_NO_SEQ
    INCREMENT BY 1
    START WITH 1;

CREATE SEQUENCE POST_INFO_POST_NUM_SEQ
    INCREMENT BY 1
    START WITH 1;
    
    
COMMENT ON TABLE USER_INFO_TB IS '유저정보 테이블';
COMMENT ON COLUMN USER_INFO_TB.USER_NO IS '유저 번호, 기본키, USER_INFO_USER_NO_SEQ 시퀀스로 증가';
COMMENT ON COLUMN USER_INFO_TB.USER_NAME IS '유저 이름';
COMMENT ON COLUMN USER_INFO_TB.USER_NICKNAME IS '유저 별명(닉네임) 고유키';
COMMENT ON COLUMN USER_INFO_TB.USER_PHONE_EMAIL IS '유저 전화번호 OR 이메일';
COMMENT ON COLUMN USER_INFO_TB.USER_PASSWORD IS '유저 비밀번호';
COMMENT ON COLUMN USER_INFO_TB.USER_BIRTH IS '유저 생일';
COMMENT ON COLUMN USER_INFO_TB.USER_GENDER IS '유저 성별';
COMMENT ON COLUMN USER_INFO_TB.USER_CREATEDATE IS '유저 생성일';
COMMENT ON COLUMN USER_INFO_TB.USER_MODIFYDATE IS '유저 정보 수정일';    

COMMENT ON TABLE POST_INFO_TB IS '게시글 상세 정보 테이블';
COMMENT ON COLUMN POST_INFO_TB.POST_NUM IS '게시글 번호, 기본키, POST_INFO_TB_POST_NUM 시퀀스로 증가';
COMMENT ON COLUMN POST_INFO_TB.POST_NO IS '외래키 참조 USER_INFO_TB(USER_NO)';
COMMENT ON COLUMN POST_INFO_TB.POST_TITLE IS '게시글 제목';
COMMENT ON COLUMN POST_INFO_TB.POST_CONTENT IS '게시글 내용';
COMMENT ON COLUMN POST_INFO_TB.POST_CREATEDATE IS '게시글 생성일';
COMMENT ON COLUMN POST_INFO_TB.POST_MODIFYDATE IS '게시글 수정일';


INSERT INTO USER_INFO_TB
VALUES(USER_INFO_USER_NO_SEQ.NEXTVAL, '임의', '관리자', '12', '12',
'1985/12/05', 'M', SYSDATE, SYSDATE);

INSERT INTO USER_INFO_TB
VALUES(USER_INFO_USER_NO_SEQ.NEXTVAL, '조현석', '조닉네임', '1111@a.a', '1234',
'1985/12/05', 'M', SYSDATE, SYSDATE);

INSERT INTO USER_INFO_TB
VALUES(USER_INFO_USER_NO_SEQ.NEXTVAL, '조윤성', '윤성닉네임', '2222@a.a', '1234',
'1985/12/05', 'M', SYSDATE, SYSDATE);

INSERT INTO USER_INFO_TB
VALUES(USER_INFO_USER_NO_SEQ.NEXTVAL, '오건황', '건황닉네임', '3333@a.a', '1234',
'1985/12/05', 'M', SYSDATE, SYSDATE);




// 조회
select * from user_constraints;
SELECT * FROM USER_INFO_TB;
SELECT * FROM POST_INFO_TB;

SELECT A.*, B.* 
FROM USER_INFO_TB A, POST_INFO_TB B
WHERE A.USER_NO = B.POST_NO
AND A.USER_NAME = '오건황';

commit;